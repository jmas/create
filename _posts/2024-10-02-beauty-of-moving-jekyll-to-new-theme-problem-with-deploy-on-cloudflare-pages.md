---
title: Краса переїзду на нову тему Jekyll та проблема з деплоєм у Clougflare Pages
description: Перевіз блог на нову тему і зіткнувся з проблемою деплоя у Cloudflare Pages
category: Программування
tags:
  - Jekyll
date: 2024-10-02T00:00:00.000Z
---
Перевіз блог на нову тему [chirpy](https://github.com/cotes2020/jekyll-theme-chirpy), що виглядає значно краще ніж [minima](https://github.com/jekyll/minima). В ній купа додаткового функціоналу, наприклад, педжинація, список тегів, категорії, зміст. Навігація зроблена на рівні не гіршому за WordPress. В статичному генераторі. Це дійсно вражає.

Проте, при деплої в Cloudflare Pages я зіткнувся з проблемою, що білд падав з помилкою. А так як Ruby для мене це інший всесвіт, то я не одразу зрозумів в чому полягає проблема, проте виявив що щось не так з залежністю `html-proofer`.

Перше що я зробив, це вийняв `Gemfile.lock` (те саме, що і `package-lock.json` в NodeJS) з `.gitignore`, проте це не допомогло. Подивившись у `Gemfile` я знайшов знайомий `html-proofer`:

```
gem "html-proofer", "5.0.5", group: :test
```

Він лежить в групі `test`. Тільки здагадуюсь для чого існує це групування, проте подумав, що тестувати мені нема чого і що я можу спокійно закоментити цю залежність. І це допомогло. Сайт збирається і працює нормально.

Ще потрібно закоментувати виклик `htmlproofer` в `.github/workflows/pages-deploy.yml`:

```yaml
      # - name: Test site
      #   run: |
      #     bundle exec htmlproofer _site \
      #       \-\-disable-external \
      #       \-\-ignore-urls "/^http:\/\/127.0.0.1/,/^http:\/\/0.0.0.0/,/^http:\/\/localhost/"
```

Тема chirpy виглядає феноменально, проте їй бракує української локалізації. Швидкий пошук як можно локалізувати тему через конфіг нічого не дав. Весь переїзд зайняв приблизно 1 годину (якщоб не проблема з залежністю, то хвилин 20) і звівся до копіювання файлів з директорії `_posts`, створення нового сайту в Cloudflare, видалення старого і привʼязки домена в новий. В Cloudflare операції зі статичними сайтами та доменами робляться непристойно просто (і не тільки з цим), що робить цю платформу залежністю від якої буде складно відмовитися. Проте, я заспокоюю себе, що ми маємо Github Pages, Netlify. Так само купу R2-подібних сховищ: AWS S3, Backblaze. Тож, поки що монополія відміняється.